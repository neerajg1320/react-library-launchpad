react-library-launchpad/ $ history

cd Projects
cd Glassball
cd Production

mkdir react-library-launchpad
cd react-library-launchpad

npm init -y
lerna init

touch project.txt
idea .

mkdir packages/components

lerna create @glassball/button --yes
lerna create @glassball/text --yes
lerna create @glassball/gallery --yes

mv packages/button packages/components
mv packages/text packages/components
mv packages/gallery packages/components

vi package.json

  "workspaces": [
    "packages/components/*"
  ],

lerna create @glassball/builder-rollup --yes
# We do not move this to components as this is not a components

lerna add @glassball/button --scope=@glassball/gallery
lerna add @glassball/text --scope=@glassball/gallery
lerna add react --dev --scope '{@glassball/button,@glassball/text}'
lerna add react@18.x --peer --scope '{@glassball/button,@glassball/text}'

lerna add clsx --dev --scope '{@glassball/button,@glassball/text}'

## Setup builder wiring
# Create a test script
$ cd packages/builder-rollup

# Wire the CLI
"bin": {
  "builder-rollup": "./lib/builder-rollup.js"
},

# For testing we will just create a stub file:

$ vi packages/builder-rollup/lib/builder-rollup.js
#!/usr/bin/env node
console.log('Lets Build');

chmod +x packages/builder-rollup/lib/builder-rollup.js

lerna add @glassball/builder-rollup --dev --scope '{@glassball/button,@glassball/text,@glassball/gallery}'

# Add a target in all three packages
    "build": "builder-rollup",

# Commit
git status .
vi .gitignore
git add .
git commit -m "Initial Commit"
git remote add origin git@github.com:neeraj76/react-library-launchpad.git\ngit push -u origin master

## Write the builder script

lerna add rollup --scope=@glassball/builder-rollup
lerna add @babel/core --scope=@glassball/builder-rollup
lerna add @babel/preset-env --scope=@glassball/builder-rollup
lerna add @babel/preset-react --scope=@glassball/builder-rollup
lerna add @rollup/plugin-babel --scope=@glassball/builder-rollup
lerna add @rollup/plugin-node-resolve --scope=@glassball/builder-rollup
lerna add rollup-plugin-postcss --scope=@glassball/builder-rollup
lerna add postcss --scope=@glassball/builder-rollup

# We need postcss for CSS modules support

# build scripts completion
# In each of the packages we have
    "build": "builder-rollup",
    "clean": "rm -rf dist",
    "purge": "rm -rf node_modules",

# In the main package.json
  "scripts": {
    "build": "lerna run build",
    "clean": "rm -rf dist",
    "purge": "rm -rf node_modules"
  },

## Add Storybook
npx -p @storybook/cli sb init --type react
# Press y to create .npmrc

npm install --save-dev react react-dom
# We already have react installed due to components but the react-dom gets installed

$ npm run storybook
# The storybook is running

